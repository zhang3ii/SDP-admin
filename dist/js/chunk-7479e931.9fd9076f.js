(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7479e931"],{"00ba":function(e,t,a){var n=a("3eba"),i=a("e46b"),r=a("e0d3"),o=r.defaultEmphasis,l=n.extendSeriesModel({type:"series.funnel",init:function(e){l.superApply(this,"init",arguments),this.legendDataProvider=function(){return this.getRawData()},this._defaultLabelLine(e)},getInitialData:function(e,t){return i(this,["value"])},_defaultLabelLine:function(e){o(e,"labelLine",["show"]);var t=e.labelLine,a=e.emphasis.labelLine;t.show=t.show&&e.label.show,a.show=a.show&&e.emphasis.label.show},getDataParams:function(e){var t=this.getData(),a=l.superCall(this,"getDataParams",e),n=t.mapDimension("value"),i=t.getSum(n);return a.percent=i?+(t.get(n,e)/i*100).toFixed(2):0,a.$vars.push("percent"),a},defaultOption:{zlevel:0,z:2,legendHoverLink:!0,left:80,top:60,right:80,bottom:60,minSize:"0%",maxSize:"100%",sort:"descending",gap:0,funnelAlign:"center",label:{show:!0,position:"outer"},labelLine:{show:!0,length:20,lineStyle:{width:1,type:"solid"}},itemStyle:{borderColor:"#fff",borderWidth:1},emphasis:{label:{show:!0}}}}),s=l;e.exports=s},"24b9":function(e,t,a){var n=a("f934"),i=a("3842"),r=i.parsePercent,o=i.linearMap;function l(e,t){return n.getLayoutRect(e.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()})}function s(e,t){for(var a=e.mapDimension("value"),n=e.mapArray(a,function(e){return e}),i=[],r="ascending"===t,o=0,l=e.count();o<l;o++)i[o]=o;return"function"===typeof t?i.sort(t):"none"!==t&&i.sort(function(e,t){return r?n[e]-n[t]:n[t]-n[e]}),i}function u(e){e.each(function(t){var a,n,i,r,o=e.getItemModel(t),l=o.getModel("label"),s=l.get("position"),u=o.getModel("labelLine"),d=e.getItemLayout(t),c=d.points,g="inner"===s||"inside"===s||"center"===s||"insideLeft"===s||"insideRight"===s;if(g)"insideLeft"===s?(n=(c[0][0]+c[3][0])/2+5,i=(c[0][1]+c[3][1])/2,a="left"):"insideRight"===s?(n=(c[1][0]+c[2][0])/2-5,i=(c[1][1]+c[2][1])/2,a="right"):(n=(c[0][0]+c[1][0]+c[2][0]+c[3][0])/4,i=(c[0][1]+c[1][1]+c[2][1]+c[3][1])/4,a="center"),r=[[n,i],[n,i]];else{var h,m,p,f=u.get("length");"left"===s?(h=(c[3][0]+c[0][0])/2,m=(c[3][1]+c[0][1])/2,p=h-f,n=p-5,a="right"):"right"===s?(h=(c[1][0]+c[2][0])/2,m=(c[1][1]+c[2][1])/2,p=h+f,n=p+5,a="left"):"rightTop"===s?(h=c[1][0],m=c[1][1],p=h+f,n=p+5,a="top"):"rightBottom"===s?(h=c[2][0],m=c[2][1],p=h+f,n=p+5,a="bottom"):"leftTop"===s?(h=c[0][0],m=c[1][1],p=h-f,n=p-5,a="right"):"leftBottom"===s?(h=c[3][0],m=c[2][1],p=h-f,n=p-5,a="right"):(h=(c[1][0]+c[2][0])/2,m=(c[1][1]+c[2][1])/2,p=h+f,n=p+5,a="left");var v=m;r=[[h,m],[p,v]],i=v}d.label={linePoints:r,x:n,y:i,verticalAlign:"middle",textAlign:a,inside:g}})}function d(e,t,a){e.eachSeriesByType("funnel",function(e){var a=e.getData(),n=a.mapDimension("value"),i=e.get("sort"),d=l(e,t),c=s(a,i),g=[r(e.get("minSize"),d.width),r(e.get("maxSize"),d.width)],h=a.getDataExtent(n),m=e.get("min"),p=e.get("max");null==m&&(m=Math.min(h[0],0)),null==p&&(p=h[1]);var f=e.get("funnelAlign"),v=e.get("gap"),b=(d.height-v*(a.count()-1))/a.count(),y=d.y,_=function(e,t){var i,r=a.get(n,e)||0,l=o(r,[m,p],g,!0);switch(f){case"left":i=d.x;break;case"center":i=d.x+(d.width-l)/2;break;case"right":i=d.x+d.width-l;break}return[[i,t],[i+l,t]]};"ascending"===i&&(b=-b,v=-v,y+=d.height,c=c.reverse());for(var x=0;x<c.length;x++){var w=c[x],S=c[x+1],I=a.getItemModel(w),D=I.get("itemStyle.height");null==D?D=b:(D=r(D,d.height),"ascending"===i&&(D=-D));var L=_(w,y),M=_(S,y+D);y+=D+v,a.setItemLayout(w,{points:L.concat(M.slice().reverse())})}u(a)})}e.exports=d},"4d62":function(e,t,a){var n=a("2306"),i=a("6d8b"),r=a("e887");function o(e,t){n.Group.call(this);var a=new n.Polygon,i=new n.Polyline,r=new n.Text;this.add(a),this.add(i),this.add(r),this.highDownOnUpdate=function(e,t){"emphasis"===t?(i.ignore=i.hoverIgnore,r.ignore=r.hoverIgnore):(i.ignore=i.normalIgnore,r.ignore=r.normalIgnore)},this.updateData(e,t,!0)}var l=o.prototype,s=["itemStyle","opacity"];l.updateData=function(e,t,a){var r=this.childAt(0),o=e.hostModel,l=e.getItemModel(t),u=e.getItemLayout(t),d=e.getItemModel(t).get(s);d=null==d?1:d,r.useStyle({}),a?(r.setShape({points:u.points}),r.setStyle({opacity:0}),n.initProps(r,{style:{opacity:d}},o,t)):n.updateProps(r,{style:{opacity:d},shape:{points:u.points}},o,t);var c=l.getModel("itemStyle"),g=e.getItemVisual(t,"color");r.setStyle(i.defaults({lineJoin:"round",fill:g},c.getItemStyle(["opacity"]))),r.hoverStyle=c.getModel("emphasis").getItemStyle(),this._updateLabel(e,t),n.setHoverStyle(this)},l._updateLabel=function(e,t){var a=this.childAt(1),i=this.childAt(2),r=e.hostModel,o=e.getItemModel(t),l=e.getItemLayout(t),s=l.label,u=e.getItemVisual(t,"color");n.updateProps(a,{shape:{points:s.linePoints||s.linePoints}},r,t),n.updateProps(i,{style:{x:s.x,y:s.y}},r,t),i.attr({rotation:s.rotation,origin:[s.x,s.y],z2:10});var d=o.getModel("label"),c=o.getModel("emphasis.label"),g=o.getModel("labelLine"),h=o.getModel("emphasis.labelLine");u=e.getItemVisual(t,"color");n.setLabelStyle(i.style,i.hoverStyle={},d,c,{labelFetcher:e.hostModel,labelDataIndex:t,defaultText:e.getName(t),autoColor:u,useInsideStyle:!!s.inside},{textAlign:s.textAlign,textVerticalAlign:s.verticalAlign}),i.ignore=i.normalIgnore=!d.get("show"),i.hoverIgnore=!c.get("show"),a.ignore=a.normalIgnore=!g.get("show"),a.hoverIgnore=!h.get("show"),a.setStyle({stroke:u}),a.setStyle(g.getModel("lineStyle").getLineStyle()),a.hoverStyle=h.getModel("lineStyle").getLineStyle()},i.inherits(o,n.Group);var u=r.extend({type:"funnel",render:function(e,t,a){var n=e.getData(),i=this._data,r=this.group;n.diff(i).add(function(e){var t=new o(n,e);n.setItemGraphicEl(e,t),r.add(t)}).update(function(e,t){var a=i.getItemGraphicEl(t);a.updateData(n,e),r.add(a),n.setItemGraphicEl(e,a)}).remove(function(e){var t=i.getItemGraphicEl(e);r.remove(t)}).execute(),this._data=n},remove:function(){this.group.removeAll(),this._data=null},dispose:function(){}}),d=u;e.exports=d},9316:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("shop-header"),a("div",[a("a-row",{attrs:{gutter:8}},[a("a-col",{style:{marginBottom:"24px"},attrs:{sm:24,md:12,xl:6}},[a("chart-card",{attrs:{loading:e.loading,title:"90日内意向用户数",total:e.intention_user_num_90}},[a("div",[a("mini-area")],1)])],1),a("a-col",{style:{marginBottom:"24px"},attrs:{sm:24,md:12,xl:6}},[a("chart-card",{attrs:{loading:e.loading,title:"90日内访问用户数",total:e.page_view_num_90}},[a("div",[a("mini-area")],1)])],1),a("a-col",{style:{marginBottom:"24px"},attrs:{sm:24,md:12,xl:6}},[a("chart-card",{attrs:{loading:e.loading,title:"90日内客资数",total:e.demand_num_90}},[a("div",[a("mini-area")],1)])],1),a("a-col",{style:{marginBottom:"24px"},attrs:{sm:24,md:12,xl:6}},[a("chart-card",{attrs:{loading:e.loading,title:"历史订单用户数",total:0}},[a("div",[a("mini-area")],1)])],1)],1)],1),a("div",[a("a-row",{attrs:{gutter:24}},[a("a-col",{attrs:{xl:14,lg:24,md:24,sm:24,xs:24}},[a("a-card",[a("a-tabs",[a("a-tab-pane",{key:"1",attrs:{loading:"true",tab:"90天内访问用户"}},[a("div",{staticStyle:{"min-height":"400px",margin:"20px"}},[a("a-table",{attrs:{columns:e.columns,dataSource:e.userAccessData,loading:e.loading}})],1)]),a("a-tab-pane",{key:"2",attrs:{loading:"true",tab:"90天内意向用户"}},[a("div",{staticStyle:{"min-height":"400px",margin:"20px"}},[a("a-table",{attrs:{columns:e.columns,loading:e.loading,dataSource:e.intendedUserData}})],1)])],1)],1)],1),a("a-col",{attrs:{xl:10,lg:24,md:24,sm:24,xs:24}},[a("a-card",{attrs:{title:"用户阶段漏斗"}},[a("v-funnel",{attrs:{data:e.chartData}})],1)],1)],1)],1)],1)},i=[],r=a("7e21"),o=a("2af9"),l=a("947c"),s=a.n(l),u=a("d4f3"),d=[{title:"用户ID",dataIndex:"uid"},{title:"姓名",dataIndex:"name"},{title:"访问次数",dataIndex:"visit_count"},{title:"访问时长",dataIndex:"visit_time"},{title:"意向度",dataIndex:"score"},{title:"最后访问时间",dataIndex:"action_time"}],c={name:"UserData",components:{ChartCard:o["d"],shopHeader:r["a"],MiniArea:o["h"],vFunnel:s.a},data:function(){return{userAccessData:[],intendedUserData:[],loading:!1,columns:d,pageSizeOptions:["10","20","30","40","50"],current:1,pageSize:10,total:50,chartData:{},total_user_count_90:0,page_view_num_90:0,intention_user_num_90:0,demand_num_90:0,num:0,queryParam:{}}},methods:{query:function(){var e=this;Object(u["g"])(this.queryParam).then(function(t){e.total_user_count_90=t.data.total_user_count_90,e.page_view_num_90=t.data.page_view_num_90,e.intention_user_num_90=t.data.intention_user_num_90,e.demand_num_90=t.data.demand_num_90}),Object(u["h"])(this.queryParam).then(function(t){e.userResourcessTageChart(t.data)})},userResourcessTageChart:function(e){var t={columns:["状态","数值"],rows:[]};t.rows.push({"状态":"意向用户数","数值":e.intention_user_num_90},{"状态":"访问用户数","数值":e.total_user_count},{"状态":"客资数","数值":e.total_kezi_count}),this.chartData=t},userAccessDataTable:function(){var e=this,t={hbh_store_id:this.num,limit:100,offset:0,table_type:1};Object(u["i"])(t).then(function(t){e.userAccessData=t.data.table})},intendedUserDataTable:function(){var e=this,t={hbh_store_id:this.num,limit:100,offset:0,table_type:0};Object(u["i"])(t).then(function(t){e.intendedUserData=t.data.table})}},created:function(){this.num=this.$route.params.hbh_store_id,this.queryParam={hbh_store_id:this.num},this.query(),this.userAccessDataTable(),this.intendedUserDataTable()}},g=c,h=a("2877"),m=Object(h["a"])(g,n,i,!1,null,"964bd7ae",null);t["default"]=m.exports},"947c":function(e,t,a){"use strict";function n(e){return e&&"object"===typeof e&&"default"in e?e["default"]:e}var i=a("89d6"),r=a("6f0c");a("a4b1");var o=n(a("6521"));function l(e,t){return{trigger:"item",formatter:function(a){var n=[];return n.push(i.itemPoint(a.color)),n.push(a.name+": "+r.getFormated(a.data.realValue,e,t)),n.join("")}}}function s(e){var t=e.data,a=e.legendName;return{data:t,formatter:function(e){return null!=a[e]?a[e]:e}}}function u(e){var t=e.dimension,a=e.metrics,n=e.rows,i=e.sequence,r=e.ascending,o=e.label,l=e.labelLine,s=e.itemStyle,u=e.filterZero,d=e.useDefaultOrder,c={type:"funnel"},g=n.sort(function(e,a){return i.indexOf(e[t])-i.indexOf(a[t])});u&&(g=g.filter(function(e){return e[a]}));var h=!1;g.some(function(e,t){if(t&&e[a]>g[t-1][a])return h=!0,!0});var m=100/g.length;return c.data=h&&!d?g.slice().reverse().map(function(e,n){return{name:e[t],value:(n+1)*m,realValue:e[a]}}):g.map(function(e){return{name:e[t],value:e[a],realValue:e[a]}}),r&&(c.sort="ascending"),o&&(c.label=o),l&&(c.labelLine=l),s&&(c.itemStyle=s),c}var d=function(e,t,a,n){var i=e.slice(),r=t.slice(),o=a.dataType,d=void 0===o?"normal":o,c=a.dimension,g=void 0===c?i[0]:c,h=a.sequence,m=void 0===h?r.map(function(e){return e[g]}):h,p=a.digit,f=void 0===p?2:p,v=a.ascending,b=a.label,y=a.labelLine,_=a.legendName,x=void 0===_?{}:_,w=a.itemStyle,S=a.filterZero,I=a.useDefaultOrder,D=n.tooltipVisible,L=n.legendVisible,M=void 0;if(a.metrics)M=a.metrics;else{var P=i.slice();P.splice(i.indexOf(g),1),M=P[0]}var A=D&&l(d,f),O=L&&s({data:m,legendName:x}),T=u({dimension:g,metrics:M,rows:r,sequence:m,ascending:v,label:b,labelLine:y,itemStyle:w,filterZero:S,useDefaultOrder:I}),k={tooltip:A,legend:O,series:T};return k},c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},g=c({},o,{name:"VeFunnel",data:function(){return this.chartHandler=d,{}}});e.exports=g},a4b1:function(e,t,a){var n=a("3eba");a("00ba"),a("4d62");var i=a("98e7"),r=a("24b9"),o=a("d3f47");n.registerVisual(i("funnel")),n.registerLayout(r),n.registerProcessor(o("funnel"))}}]);