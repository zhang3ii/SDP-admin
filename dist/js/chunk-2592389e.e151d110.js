(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2592389e"],{77729:function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("a-form",[t.isScreen?r("a-card",[r("div",{staticClass:"topHeader"},[r("div",[r("a-row",{attrs:{gutter:20}},[r("a-col",{attrs:{md:8,sm:24}},[r("a-form-item",{attrs:{label:"城市区域选择"}},[r("a-cascader",{staticStyle:{width:"200px"},attrs:{options:t.cityData,placeholder:"选择城市区域",changeOnSelect:""},model:{value:t.queryParam.store_citys,callback:function(e){t.$set(t.queryParam,"store_citys",e)},expression:"queryParam.store_citys"}})],1)],1),r("a-col",{attrs:{md:8,sm:24}},[r("a-form-item",{attrs:{label:"行业"}},[r("a-select",{staticStyle:{width:"200px"},attrs:{placeholder:"这里选择行业"},model:{value:t.queryParam.store_industry_name,callback:function(e){t.$set(t.queryParam,"store_industry_name",e)},expression:"queryParam.store_industry_name"}},t._l(t.industry_list,function(e,a){return r("a-select-option",{key:a,attrs:{value:e}},[t._v(t._s(e))])}),1)],1)],1),r("a-col",{attrs:{md:8,sm:24}},[r("a-form-item",{attrs:{label:"店铺"}},[r("a-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入店铺名称"},model:{value:t.queryParam.store_name,callback:function(e){t.$set(t.queryParam,"store_name",e)},expression:"queryParam.store_name"}})],1)],1)],1)],1),r("div",{staticStyle:{"margin-top":"20px"}},[r("a-row",{attrs:{gutter:20}},[r("a-col",{attrs:{md:8,sm:24}},[r("a-form-item",{attrs:{label:"合作状态"}},[r("a-select",{staticStyle:{width:"200px"},attrs:{mode:"multiple",placeholder:"这里选择合作状态"},model:{value:t.queryParam.statue,callback:function(e){t.$set(t.queryParam,"statue",e)},expression:"queryParam.statue"}},t._l(t.stateList,function(e,a){return r("a-select-option",{key:a,attrs:{value:a}},[t._v(t._s(e))])}),1)],1)],1),r("a-col",{attrs:{md:8,sm:24}},[r("a-form-item",{attrs:{label:"电话"}},[r("a-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入电话"},model:{value:t.queryParam.store_phone,callback:function(e){t.$set(t.queryParam,"store_phone",e)},expression:"queryParam.store_phone"}})],1)],1),r("a-col",{attrs:{md:8,sm:24}},[r("a-form-item",{attrs:{label:"是否关注"}},[r("a-radio-group",{attrs:{options:t.plainOptions},model:{value:t.queryParam.hasCollection,callback:function(e){t.$set(t.queryParam,"hasCollection",e)},expression:"queryParam.hasCollection"}})],1)],1)],1)],1)])]):t._e(),r("div",[r("div",{staticClass:"searchGroup"},[r("a-form-item",[r("a-input-search",{staticStyle:{width:"50%","vertical-align":"bottom"},attrs:{placeholder:"请输入商家名称，地址，联系电话等信息或者店铺id字符串进行检索",size:"large",enterButton:"搜索"},on:{search:function(e){return t.searchBtn(1)}},model:{value:t.queryParam.search,callback:function(e){t.$set(t.queryParam,"search",e)},expression:"queryParam.search"}}),r("a-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"large",type:"dashed"},on:{click:t.hasScreen}},[t._v(t._s(t.isScreen?"取消":"高级筛选"))])],1)],1)])],1),r("div",[t.hasSelected?[r("a-alert",{attrs:{type:"info",showIcon:""}},[r("template",{slot:"message"},[r("span",{staticStyle:{"margin-right":"12px"}},[t._v("已选择: "),r("a",{staticStyle:{"font-weight":"600"}},[t._v(t._s(this.selectedRowKeys.length))])]),r("span",[r("a",{attrs:{href:"javascript:"},on:{click:t.hasFollowList}},[t._v("关注   ")])]),r("span",[r("a",{attrs:{href:"#"},on:{click:t.hasMonitorList}},[t._v("监控   ")])]),t.hasContrast?r("span",[r("a",{attrs:{href:"javascript:"},on:{click:t.Contrast}},[t._v("对比   ")])]):r("span",[r("a",{attrs:{href:"javascript:"},on:{click:t.cancelContrast}},[t._v("取消   ")])])])],2)]:t._e()],2),r("div",[r("a-table",{ref:"table",attrs:{columns:t.shopSearchColumns,dataSource:t.shopSearchData,rowSelection:t.rowSelection,loading:t.loading,pagination:t.pagination,rowKey:function(t){return t.unified_store_id}},on:{change:t.handleTableChange},scopedSlots:t._u([{key:"filterDropdown",fn:function(e){e.setSelectedKeys,e.selectedKeys,e.confirm,e.clearFilters,e.column;return r("div",{staticStyle:{padding:"8px"}},[r("a-checkbox-group",{attrs:{defaultValue:["店铺ID","店铺","城市","区域","行业","电话","活跃度","意向度","口碑","热度","贡献度","意向人数","90日访问人数","客资数"]},on:{change:t.onChangeRows}},t._l(t.columnsList,function(e,a){return r("div",{key:e},[r("a-checkbox",{key:a,attrs:{value:e,disabled:"店铺ID"===e}},[t._v(t._s(e))])],1)}),0),r("div",{staticStyle:{"margin-top":"5px"}},[r("a-button",{staticStyle:{width:"50px","margin-right":"8px"},attrs:{size:"small",type:"primary"},on:{click:t.changeColumns}},[t._v("确定")])],1)],1)}},{key:"action",fn:function(e,a){return r("span",{},[r("a",{attrs:{href:"/shop/shopInfo/"+a.hbh_store_id,target:"_blank"}},[t._v("查看")]),r("a-divider",{attrs:{type:"vertical"}}),0===a.is_monitor?r("span",[r("a",{attrs:{href:"javascript:;"},on:{click:function(e){return t.hasMonitor(a.unified_store_id,a.store_name)}}},[t._v("监控")])]):r("span",[r("a",{attrs:{href:"javascript:;"},on:{click:function(e){return t.removeMonitor(a.unified_store_id,a.store_name)}}},[t._v("取消监控")])]),r("a-divider",{attrs:{type:"vertical"}}),0===a.is_follow?r("span",[r("a",{attrs:{href:"javascript:;"},on:{click:function(e){return t.hasFollow(a.unified_store_id,a.store_name)}}},[t._v("关注")])]):r("span",[r("a",{attrs:{href:"javascript:;"},on:{click:function(e){return t.removeFollow(a.unified_store_id,a.store_name)}}},[t._v("取消关注")])])],1)}}])})],1)],1)},s=[],n=(r("386d"),r("7514"),r("ac6a"),r("cebc")),o=r("322e"),i=r("d65b"),c=r("d4f3"),u=["YES","NO"],l=[{title:"店铺ID",dataIndex:"hbh_store_id",scopedSlots:{filterDropdown:"filterDropdown",filterIcon:"filter",customRender:"customRender"}},{title:"店铺",dataIndex:"store_name"},{title:"城市",dataIndex:"store_citys"},{title:"区域",dataIndex:"store_area"},{title:"行业",dataIndex:"store_industry_name"},{title:"电话",dataIndex:"store_phone"},{title:"活跃度",dataIndex:"active_degree",sorter:!0,scopedSlots:{customRender:"active_degree"}},{title:"意向度",dataIndex:"purpose_degree",sorter:!0,scopedSlots:{customRender:"purpose_degree"}},{title:"贡献度",dataIndex:"contribute_degree",sorter:!0,scopedSlots:{customRender:"contribute_degree"}},{title:"口碑",dataIndex:"public_praise",sorter:!0,scopedSlots:{customRender:"public_praise"}},{title:"热度",dataIndex:"hot_degree",sorter:!0,scopedSlots:{customRender:"hot_degree"}},{title:"90日访问人数",dataIndex:"total_user_count_90"},{title:"意向人数",dataIndex:"intention_user_num"},{title:"客资数",dataIndex:"demand_num"},{title:"操作",scopedSlots:{customRender:"action"}}],d={hlj_store_id:"婚礼纪",baihe_store_id:"百合婚礼",dianping_store_id:"大众点评"},h={name:"ShopSearch",components:{AFormItem:o["a"],AForm:i["a"]},data:function(){return{queryParam:{},plainOptions:u,shopSearchData:[],shopSearchColumns:l,selectedRowKeys:[],hasContrast:!0,dataStorage:[],stateList:d,MonitorStatue:!0,cityData:[],columnsList:[],changeList:[],shopColumnsSet:[],isScreen:!1,industry_list:[],pagination:{},loading:!0,selectedShopList:{}}},methods:{Contrast:function(){this.hasContrast=!1;var t=[];for(var e in this.selectedShopList)for(var r in this.selectedShopList[e])t.push(this.selectedShopList[e][r]);this.shopSearchData=t;var a=Object(n["a"])({},this.pagination);this.pagination.current=1,a.total=this.shopSearchData.length},cancelContrast:function(){this.searchBtn(2),this.hasContrast=!0},hasFollow:function(t,e){var r=this,a={unified_store_id:t,store_name:e};Object(c["l"])(a).then(function(t){401!==t.code&&r.$message.success(t.message)}),this.searchBtn(2)},removeFollow:function(t,e){var r=this,a={unified_store_id:t,store_name:e};Object(c["m"])(a).then(function(t){401!==t.code&&r.$message.success(t.message)}),this.searchBtn(2)},hasMonitor:function(t,e){var r=this,a={unified_store_id:t,store_name:e};Object(c["j"])(a).then(function(t){401!==t.code&&r.$message.success(t.message)}),this.searchBtn(2)},removeMonitor:function(t,e){var r=this,a={unified_store_id:t,store_name:e};Object(c["k"])(a).then(function(t){401!==t.code&&r.$message.success(t.message)}),this.searchBtn(2)},columnsTitle:function(){var t,e=[],r=this.shopSearchColumns;for(t in r)e.push(r[t]["title"]);this.columnsList=e},onChangeRows:function(t){this.changeList=t},changeColumns:function(){var t=this.shopColumnsSet,e=[];this.changeList.forEach(function(r){var a=t.find(function(t){return t.title===r});a&&e.push(a)}),this.shopSearchColumns=e},hasScreen:function(){this.isScreen=!this.isScreen},query:function(){var t=this;Object(c["g"])().then(function(e){var r,a,s=e.data,n=[];for(r in s){var o={};for(a in o["value"]=r,o["label"]=r,o["children"]=[],s[r]){var i={};i["value"]=s[r][a],i["label"]=s[r][a],o["children"].push(i)}n.push(o)}t.cityData=n}),Object(c["i"])().then(function(e){t.industry_list=e.data.industry_names})},handleTableChange:function(t,e,r){var a=Object(n["a"])({},this.queryParam),s=Object(n["a"])({},this.pagination);if(s.current=t.current,this.pagination=s,"ascend"===r.order)var o=r.field;else o="-"+r.field;this.fetch({limit:t.pageSize,offset:10*(t.current-1),store_citys:a.store_citys,store_industry_name:a.store_industry_name,store_name:a.store_name,statue:a.statue,store_phone:a.store_phone,hasCollection:a.hasCollection,search:a.search,order:o})},fetch:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.limit=10,this.loading=!0,Object(c["e"])(e).then(function(e){var r=Object(n["a"])({},t.pagination);t.loading=!1,t.shopSearchData=e.data,t.pagination=r,r.total=e.count})},searchBtn:function(t){var e=this;this.loading=!0;var r=Object(n["a"])({},this.queryParam),a=Object(n["a"])({},this.pagination);if(1===t)var s=0,o=1;else if(a.current)s=10*(a.current-1),o=a.current;else s=0,o=1;var i={limit:10,offset:s,store_citys:r.store_citys,store_industry_name:r.store_industry_name,store_name:r.store_name,statue:r.statue,store_phone:r.store_phone,hasCollection:r.hasCollection,search:r.search};Object(c["e"])(i).then(function(t){e.loading=!1,e.shopSearchData=t.data;var r=Object(n["a"])({},e.pagination);e.pagination=r,r.total=t.count,r.current=o})},hasFollowList:function(){var t=this,e=[];for(var r in this.selectedShopList)for(var a in this.selectedShopList[r]){var s=this.selectedShopList[r][a];e.push({unified_store_id:s.unified_store_id,store_name:s.store_name})}Object(c["l"])(e).then(function(e){401!==e.code&&t.$message.success(e.message)}),this.searchBtn(2)},hasMonitorList:function(){var t=this,e=[];for(var r in this.selectedShopList)for(var a in this.selectedShopList[r]){var s=this.selectedShopList[r][a];e.push({unified_store_id:s.unified_store_id,store_name:s.store_name})}Object(c["j"])(e).then(function(e){401!==e.code&&t.$message.success(e.message)}),this.searchBtn(2)}},mounted:function(){this.fetch()},computed:{hasSelected:function(){return this.selectedRowKeys.length>0},rowSelection:function(){var t=this;this.selectedRowKeys;return{onChange:function(e,r){var a=Object(n["a"])({},t.pagination);t.selectedRowKeys=e,a.current?t.selectedShopList[a.current]=r:t.selectedShopList[1]=r}}}},created:function(){this.columnsTitle(),this.shopColumnsSet=this.shopSearchColumns,this.query()}},m=h,p=(r("cc91"),r("2877")),f=Object(p["a"])(m,a,s,!1,null,"08e1a3aa",null);e["default"]=f.exports},cc91:function(t,e,r){"use strict";var a=r("d1c4"),s=r.n(a);s.a},d1c4:function(t,e,r){},d4f3:function(t,e,r){"use strict";r.d(e,"e",function(){return n}),r.d(e,"d",function(){return o}),r.d(e,"f",function(){return i}),r.d(e,"q",function(){return c}),r.d(e,"s",function(){return u}),r.d(e,"n",function(){return l}),r.d(e,"r",function(){return d}),r.d(e,"p",function(){return h}),r.d(e,"o",function(){return m}),r.d(e,"g",function(){return p}),r.d(e,"i",function(){return f}),r.d(e,"j",function(){return _}),r.d(e,"l",function(){return b}),r.d(e,"m",function(){return v}),r.d(e,"k",function(){return g}),r.d(e,"h",function(){return y}),r.d(e,"a",function(){return S}),r.d(e,"b",function(){return j}),r.d(e,"c",function(){return w}),r.d(e,"v",function(){return O}),r.d(e,"u",function(){return k}),r.d(e,"t",function(){return C}),r.d(e,"w",function(){return R});var a=r("b775"),s={store:"/store/",shopDetail:"/storedetail/",shopHealth:"/storehealth/",UserResourcesFour:"/UserResourcesFour/",UserResourcesTable:"/UserResourcesTable/",UserResourcesStage:"/UserResourcesStage/",UserResourcesFlowFour:"/UserResourcesFlowFour/",UserResourcesFlowTop:"/UserResourcesFlowTop/",UserResourcesFlowTable:"/UserResourcesFlowTable/",StoreCityArea:"/StoreCityArea/",StoreIndustry:"/StoreIndustry/",StoreKpAdd:"/api/store/kp_add",StoreLkAdd:"/api/store/lk_add",StoreKpRemove:"/api/store/kp_remove",StoreLkRemove:"/api/store/lk_remove",StoreDynamic:"/StoreDynamic/",CompetitionDianping:"/api/store/competition/dianping",CompetitionQA:"/api/store/qa",CompetitionData:"/api/store/competition"};function n(t){return Object(a["b"])({url:s.store,method:"get",params:t})}function o(t){return Object(a["b"])({url:s.shopDetail,method:"get",params:t})}function i(t){return Object(a["b"])({url:s.shopHealth,method:"get",params:t})}function c(t){return Object(a["b"])({url:s.UserResourcesFour,method:"get",params:t})}function u(t){return Object(a["b"])({url:s.UserResourcesTable,method:"get",params:t})}function l(t){return Object(a["b"])({url:s.UserResourcesFlowFour,method:"get",params:t})}function d(t){return Object(a["b"])({url:s.UserResourcesStage,method:"get",params:t})}function h(t){return Object(a["b"])({url:s.UserResourcesFlowTop,method:"get",params:t})}function m(t){return Object(a["b"])({url:s.UserResourcesFlowTable,method:"get",params:t})}function p(){return Object(a["b"])({url:s.StoreCityArea,method:"get"})}function f(){return Object(a["b"])({url:s.StoreIndustry,method:"get"})}function _(t){return Object(a["b"])({url:s.StoreKpAdd,method:"post",data:t})}function b(t){return Object(a["b"])({url:s.StoreLkAdd,method:"post",data:t})}function v(t){return Object(a["b"])({url:s.StoreLkRemove,method:"post",data:t})}function g(t){return Object(a["b"])({url:s.StoreKpRemove,method:"post",data:t})}function y(t){return Object(a["b"])({url:s.StoreDynamic,method:"get",params:t})}function S(t){return Object(a["b"])({url:s.CompetitionData,method:"get",params:t})}function j(t){return Object(a["b"])({url:s.CompetitionDianping,method:"get",params:t})}function w(t){return Object(a["b"])({url:s.CompetitionQA,method:"get",params:t})}function O(){return Object(a["b"])({url:"/api/user/monitor",method:"post"})}function k(){return Object(a["b"])({url:"/api/user/lk",method:"post"})}function C(t){return Object(a["b"])({url:"/api/store/lk_remove",method:"post",data:t})}function R(t){return Object(a["b"])({url:"/api/store/kp_remove",method:"post",data:t})}}}]);