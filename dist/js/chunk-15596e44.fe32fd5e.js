(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-15596e44"],{"0e0f":function(t,e,a){var n=a("5f14"),i=a("6d8b");function r(t,e){t.eachSeriesByType("sankey",function(t){var e=t.getGraph(),a=e.nodes;if(a.length){var r=1/0,o=-1/0;i.each(a,function(t){var e=t.getLayout().value;e<r&&(r=e),e>o&&(o=e)}),i.each(a,function(e){var a=new n({type:"color",mappingMethod:"linear",dataExtent:[r,o],visual:t.get("color")}),i=a.mapValueToVisual(e.getLayout().value),s=e.getModel().get("itemStyle.color");null!=s?e.setVisual("color",s):e.setVisual("color",i)})}})}t.exports=r},"17b8":function(t,e,a){var n=a("3014"),i=n.extend({type:"series.bar",dependencies:["grid","polar"],brushSelector:"rect",getProgressive:function(){return!!this.get("large")&&this.get("progressive")},getProgressiveThreshold:function(){var t=this.get("progressiveThreshold"),e=this.get("largeThreshold");return e>t&&(t=e),t},defaultOption:{clip:!0}});t.exports=i},"1bdf":function(t,e,a){"use strict";function n(t){return t&&"object"===typeof t&&"default"in t?t["default"]:t}var i=a("6f0c"),r=a("89d6");a("311a");var o=n(a("6521")),s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t};function l(t){var e=t.itemDataType,a=t.linksDataType,n=t.digit;return{trigger:"item",formatter:function(t){var o=[],s=t.name,l=t.data,u=t.value,d=t.color;return o.push(r.itemPoint(d)),o.push(s+" : "),l&&l.source?o.push(i.getFormated(u,a,n)+"<br />"):o.push(i.getFormated(u,e,n)+"<br />"),o.join("")}}}function u(t){var e=t.rows,a=t.dimension,n=t.metrics,i=t.links,r=t.valueFull,o=t.useDataValue,l=t.label,u=t.itemStyle,d=t.lineStyle,c={},h=e.map(function(t){return c[t[a]]=t[n],{name:t[a],value:t[n]}}),p=null;p=o?i.map(function(t){return s({},t,{value:c[t.target]})}):r?i:i.map(function(t){return null==t.value?s({},t,{value:c[t.target]}):t});var g={type:"sankey",data:h,links:p};return l&&(g.label=l),u&&(g.itemStyle=u),d&&(g.lineStyle=d),[g]}var d=function(t,e,a,n){var i=a.links,r=a.dimension,o=void 0===r?t[0]:r,s=a.metrics,d=void 0===s?t[1]:s,c=a.dataType,h=void 0===c?["normal","normal"]:c,p=a.digit,g=void 0===p?2:p,f=a.valueFull,y=void 0!==f&&f,v=a.useDataValue,m=void 0!==v&&v,_=a.label,x=a.itemStyle,b=a.lineStyle;if(i){var w=h[0],I=h[1],L=l({itemDataType:w,linksDataType:I,digit:g}),S=u({rows:e,dimension:o,metrics:d,links:i,valueFull:y,useDataValue:m,label:_,itemStyle:x,lineStyle:b});return{tooltip:L,series:S}}console.warn("links is needed in settings!")},c=s({},o,{name:"VeSankey",data:function(){return this.chartHandler=d,{}}});t.exports=c},"237f":function(t,e,a){var n=a("6d8b"),i=a("6179"),r=a("7368"),o=a("31d9"),s=a("b1d4"),l=a("2039"),u=a("3301");function d(t,e,a,d,c){for(var h=new r(d),p=0;p<t.length;p++)h.addNode(n.retrieve(t[p].id,t[p].name,p),p);var g=[],f=[],y=0;for(p=0;p<e.length;p++){var v=e[p],m=v.source,_=v.target;h.addEdge(m,_,y)&&(f.push(v),g.push(n.retrieve(v.id,m+" > "+_)),y++)}var x,b=a.get("coordinateSystem");if("cartesian2d"===b||"polar"===b)x=u(t,a);else{var w=l.get(b),I=w&&"view"!==w.type&&w.dimensions||[];n.indexOf(I,"value")<0&&I.concat(["value"]);var L=s(t,{coordDimensions:I});x=new i(L,a),x.initData(t)}var S=new i(["value"],a);return S.initData(f,g),c&&c(x,S),o({mainData:x,struct:h,structAttr:"graph",datas:{node:x,edge:S},datasAttr:{node:"data",edge:"edgeData"}}),h.update(),h}t.exports=d},2502:function(t,e,a){},3014:function(t,e,a){var n=a("4f85"),i=a("3301"),r=n.extend({type:"series.__base_bar__",getInitialData:function(t,e){return i(this.getSource(),this)},getMarkerPosition:function(t){var e=this.coordinateSystem;if(e){var a=e.dataToPoint(e.clampData(t)),n=this.getData(),i=n.getLayout("offset"),r=n.getLayout("size"),o=e.getBaseAxis().isHorizontal()?0:1;return a[o]+=i+r/2,a}return[NaN,NaN]},defaultOption:{zlevel:0,z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,barMinHeight:0,barMinAngle:0,large:!1,largeThreshold:400,progressive:3e3,progressiveChunkMode:"mod",itemStyle:{},emphasis:{}}});t.exports=r},"311a":function(t,e,a){var n=a("3eba");a("d01c"),a("5b69"),a("bdc0");var i=a("81ac"),r=a("0e0f");n.registerLayout(i),n.registerVisual(r)},"31d9":function(t,e,a){var n=a("6d8b"),i=n.each,r="\0__link_datas",o="\0__link_mainData";function s(t){var e=t.mainData,a=t.datas;a||(a={main:e},t.datasAttr={main:"data"}),t.datas=t.mainData=null,p(e,a,t),i(a,function(a){i(e.TRANSFERABLE_METHODS,function(e){a.wrapMethod(e,n.curry(l,t))})}),e.wrapMethod("cloneShallow",n.curry(d,t)),i(e.CHANGABLE_METHODS,function(a){e.wrapMethod(a,n.curry(u,t))}),n.assert(a[e.dataType]===e)}function l(t,e){if(h(this)){var a=n.extend({},this[r]);a[this.dataType]=e,p(e,a,t)}else g(e,this.dataType,this[o],t);return e}function u(t,e){return t.struct&&t.struct.update(this),e}function d(t,e){return i(e[r],function(a,n){a!==e&&g(a.cloneShallow(),n,e,t)}),e}function c(t){var e=this[o];return null==t||null==e?e:e[r][t]}function h(t){return t[o]===t}function p(t,e,a){t[r]={},i(e,function(e,n){g(e,n,t,a)})}function g(t,e,a,n){a[r][e]=t,t[o]=a,t.dataType=e,n.struct&&(t[n.structAttr]=n.struct,n.struct[n.datasAttr[e]]=t),t.getLinkedData=c}var f=s;t.exports=f},"5b69":function(t,e,a){var n=a("2306"),i=a("3eba"),r=a("6d8b"),o=["itemStyle","opacity"],s=["lineStyle","opacity"];function l(t,e){return t.getVisual("opacity")||t.getModel().get(e)}function u(t,e,a){var n=t.getGraphicEl(),i=l(t,e);null!=a&&(null==i&&(i=1),i*=a),n.downplay&&n.downplay(),n.traverse(function(t){"group"!==t.type&&t.setStyle("opacity",i)})}function d(t,e){var a=l(t,e),n=t.getGraphicEl();n.highlight&&n.highlight(),n.traverse(function(t){"group"!==t.type&&t.setStyle("opacity",a)})}var c=n.extendShape({shape:{x1:0,y1:0,x2:0,y2:0,cpx1:0,cpy1:0,cpx2:0,cpy2:0,extent:0,orient:""},buildPath:function(t,e){var a=e.extent;t.moveTo(e.x1,e.y1),t.bezierCurveTo(e.cpx1,e.cpy1,e.cpx2,e.cpy2,e.x2,e.y2),"vertical"===e.orient?(t.lineTo(e.x2+a,e.y2),t.bezierCurveTo(e.cpx2+a,e.cpy2,e.cpx1+a,e.cpy1,e.x1+a,e.y1)):(t.lineTo(e.x2,e.y2+a),t.bezierCurveTo(e.cpx2,e.cpy2+a,e.cpx1,e.cpy1+a,e.x1,e.y1+a)),t.closePath()}}),h=i.extendChartView({type:"sankey",_model:null,_focusAdjacencyDisabled:!1,render:function(t,e,a){var i=this,r=t.getGraph(),o=this.group,s=t.layoutInfo,l=s.width,u=s.height,d=t.getData(),h=t.getData("edge"),g=t.get("orient");this._model=t,o.removeAll(),o.attr("position",[s.x,s.y]),r.eachEdge(function(e){var a=new c;a.dataIndex=e.dataIndex,a.seriesIndex=t.seriesIndex,a.dataType="edge";var i,r,s,d,p,f,y,v,m=e.getModel("lineStyle"),_=m.get("curveness"),x=e.node1.getLayout(),b=e.node1.getModel(),w=b.get("localX"),I=b.get("localY"),L=e.node2.getLayout(),S=e.node2.getModel(),D=S.get("localX"),M=S.get("localY"),A=e.getLayout();switch(a.shape.extent=Math.max(1,A.dy),a.shape.orient=g,"vertical"===g?(i=(null!=w?w*l:x.x)+A.sy,r=(null!=I?I*u:x.y)+x.dy,s=(null!=D?D*l:L.x)+A.ty,d=null!=M?M*u:L.y,p=i,f=r*(1-_)+d*_,y=s,v=r*_+d*(1-_)):(i=(null!=w?w*l:x.x)+x.dx,r=(null!=I?I*u:x.y)+A.sy,s=null!=D?D*l:L.x,d=(null!=M?M*u:L.y)+A.ty,p=i*(1-_)+s*_,f=r,y=i*_+s*(1-_),v=d),a.setShape({x1:i,y1:r,x2:s,y2:d,cpx1:p,cpy1:f,cpx2:y,cpy2:v}),a.setStyle(m.getItemStyle()),a.style.fill){case"source":a.style.fill=e.node1.getVisual("color");break;case"target":a.style.fill=e.node2.getVisual("color");break}n.setHoverStyle(a,e.getModel("emphasis.lineStyle").getItemStyle()),o.add(a),h.setItemGraphicEl(e.dataIndex,a)}),r.eachNode(function(e){var a=e.getLayout(),i=e.getModel(),r=i.get("localX"),s=i.get("localY"),c=i.getModel("label"),h=i.getModel("emphasis.label"),p=new n.Rect({shape:{x:null!=r?r*l:a.x,y:null!=s?s*u:a.y,width:a.dx,height:a.dy},style:i.getModel("itemStyle").getItemStyle()}),g=e.getModel("emphasis.itemStyle").getItemStyle();n.setLabelStyle(p.style,g,c,h,{labelFetcher:t,labelDataIndex:e.dataIndex,defaultText:e.id,isRectText:!0}),p.setStyle("fill",e.getVisual("color")),n.setHoverStyle(p,g),o.add(p),d.setItemGraphicEl(e.dataIndex,p),p.dataType="node"}),d.eachItemGraphicEl(function(e,n){var r=d.getItemModel(n);r.get("draggable")&&(e.drift=function(e,r){i._focusAdjacencyDisabled=!0,this.shape.x+=e,this.shape.y+=r,this.dirty(),a.dispatchAction({type:"dragNode",seriesId:t.id,dataIndex:d.getRawIndex(n),localX:this.shape.x/l,localY:this.shape.y/u})},e.ondragend=function(){i._focusAdjacencyDisabled=!1},e.draggable=!0,e.cursor="move"),r.get("focusNodeAdjacency")&&(e.off("mouseover").on("mouseover",function(){i._focusAdjacencyDisabled||a.dispatchAction({type:"focusNodeAdjacency",seriesId:t.id,dataIndex:e.dataIndex})}),e.off("mouseout").on("mouseout",function(){i._focusAdjacencyDisabled||a.dispatchAction({type:"unfocusNodeAdjacency",seriesId:t.id})}))}),h.eachItemGraphicEl(function(e,n){var r=h.getItemModel(n);r.get("focusNodeAdjacency")&&(e.off("mouseover").on("mouseover",function(){i._focusAdjacencyDisabled||a.dispatchAction({type:"focusNodeAdjacency",seriesId:t.id,edgeDataIndex:e.dataIndex})}),e.off("mouseout").on("mouseout",function(){i._focusAdjacencyDisabled||a.dispatchAction({type:"unfocusNodeAdjacency",seriesId:t.id})}))}),!this._data&&t.get("animation")&&o.setClipPath(p(o.getBoundingRect(),t,function(){o.removeClipPath()})),this._data=t.getData()},dispose:function(){},focusNodeAdjacency:function(t,e,a,n){var i=this._model.getData(),l=i.graph,c=n.dataIndex,h=i.getItemModel(c),p=n.edgeDataIndex;if(null!=c||null!=p){var g=l.getNodeByIndex(c),f=l.getEdgeByIndex(p);if(l.eachNode(function(t){u(t,o,.1)}),l.eachEdge(function(t){u(t,s,.1)}),g){d(g,o);var y=h.get("focusNodeAdjacency");"outEdges"===y?r.each(g.outEdges,function(t){t.dataIndex<0||(d(t,s),d(t.node2,o))}):"inEdges"===y?r.each(g.inEdges,function(t){t.dataIndex<0||(d(t,s),d(t.node1,o))}):"allEdges"===y&&r.each(g.edges,function(t){t.dataIndex<0||(d(t,s),d(t.node1,o),d(t.node2,o))})}f&&(d(f,s),d(f.node1,o),d(f.node2,o))}},unfocusNodeAdjacency:function(t,e,a,n){var i=this._model.getGraph();i.eachNode(function(t){u(t,o)}),i.eachEdge(function(t){u(t,s)})}});function p(t,e,a){var i=new n.Rect({shape:{x:t.x-10,y:t.y-10,width:0,height:t.height+20}});return n.initProps(i,{shape:{width:t.width+20,height:t.height+20}},e,a),i}t.exports=h},"5f14":function(t,e,a){var n=a("6d8b"),i=a("41ef"),r=a("3842"),o=r.linearMap,s=n.each,l=n.isObject,u=-1,d=function(t){var e=t.mappingMethod,a=t.type,i=this.option=n.clone(t);this.type=a,this.mappingMethod=e,this._normalizeData=I[e];var r=c[a];this.applyVisual=r.applyVisual,this.getColorMapper=r.getColorMapper,this._doMap=r._doMap[e],"piecewise"===e?(g(i),h(i)):"category"===e?i.categories?p(i):g(i,!0):(n.assert("linear"!==e||i.dataExtent),g(i))};d.prototype={constructor:d,mapValueToVisual:function(t){var e=this._normalizeData(t);return this._doMap(e,t)},getNormalizer:function(){return n.bind(this._normalizeData,this)}};var c=d.visualHandlers={color:{applyVisual:v("color"),getColorMapper:function(){var t=this.option;return n.bind("category"===t.mappingMethod?function(t,e){return!e&&(t=this._normalizeData(t)),m.call(this,t)}:function(e,a,n){var r=!!n;return!a&&(e=this._normalizeData(e)),n=i.fastLerp(e,t.parsedVisual,n),r?n:i.stringify(n,"rgba")},this)},_doMap:{linear:function(t){return i.stringify(i.fastLerp(t,this.option.parsedVisual),"rgba")},category:m,piecewise:function(t,e){var a=b.call(this,e);return null==a&&(a=i.stringify(i.fastLerp(t,this.option.parsedVisual),"rgba")),a},fixed:_}},colorHue:f(function(t,e){return i.modifyHSL(t,e)}),colorSaturation:f(function(t,e){return i.modifyHSL(t,null,e)}),colorLightness:f(function(t,e){return i.modifyHSL(t,null,null,e)}),colorAlpha:f(function(t,e){return i.modifyAlpha(t,e)}),opacity:{applyVisual:v("opacity"),_doMap:x([0,1])},liftZ:{applyVisual:v("liftZ"),_doMap:{linear:_,category:_,piecewise:_,fixed:_}},symbol:{applyVisual:function(t,e,a){var i=this.mapValueToVisual(t);if(n.isString(i))a("symbol",i);else if(l(i))for(var r in i)i.hasOwnProperty(r)&&a(r,i[r])},_doMap:{linear:y,category:m,piecewise:function(t,e){var a=b.call(this,e);return null==a&&(a=y.call(this,t)),a},fixed:_}},symbolSize:{applyVisual:v("symbolSize"),_doMap:x([0,1])}};function h(t){var e=t.pieceList;t.hasSpecialVisual=!1,n.each(e,function(e,a){e.originIndex=a,null!=e.visual&&(t.hasSpecialVisual=!0)})}function p(t){var e=t.categories,a=t.visual,i=t.categoryMap={};if(s(e,function(t,e){i[t]=e}),!n.isArray(a)){var r=[];n.isObject(a)?s(a,function(t,e){var a=i[e];r[null!=a?a:u]=t}):r[u]=a,a=w(t,r)}for(var o=e.length-1;o>=0;o--)null==a[o]&&(delete i[e[o]],e.pop())}function g(t,e){var a=t.visual,i=[];n.isObject(a)?s(a,function(t){i.push(t)}):null!=a&&i.push(a);var r={color:1,symbol:1};e||1!==i.length||r.hasOwnProperty(t.type)||(i[1]=i[0]),w(t,i)}function f(t){return{applyVisual:function(e,a,n){e=this.mapValueToVisual(e),n("color",t(a("color"),e))},_doMap:x([0,1])}}function y(t){var e=this.option.visual;return e[Math.round(o(t,[0,1],[0,e.length-1],!0))]||{}}function v(t){return function(e,a,n){n(t,this.mapValueToVisual(e))}}function m(t){var e=this.option.visual;return e[this.option.loop&&t!==u?t%e.length:t]}function _(){return this.option.visual[0]}function x(t){return{linear:function(e){return o(e,t,this.option.visual,!0)},category:m,piecewise:function(e,a){var n=b.call(this,a);return null==n&&(n=o(e,t,this.option.visual,!0)),n},fixed:_}}function b(t){var e=this.option,a=e.pieceList;if(e.hasSpecialVisual){var n=d.findPieceIndex(t,a),i=a[n];if(i&&i.visual)return i.visual[this.type]}}function w(t,e){return t.visual=e,"color"===t.type&&(t.parsedVisual=n.map(e,function(t){return i.parse(t)})),e}var I={linear:function(t){return o(t,this.option.dataExtent,[0,1],!0)},piecewise:function(t){var e=this.option.pieceList,a=d.findPieceIndex(t,e,!0);if(null!=a)return o(a,[0,e.length-1],[0,1],!0)},category:function(t){var e=this.option.categories?this.option.categoryMap[t]:t;return null==e?u:e},fixed:n.noop};function L(t,e,a){return t?e<=a:e<a}d.listVisualTypes=function(){var t=[];return n.each(c,function(e,a){t.push(a)}),t},d.addVisualHandler=function(t,e){c[t]=e},d.isValidType=function(t){return c.hasOwnProperty(t)},d.eachVisual=function(t,e,a){n.isObject(t)?n.each(t,e,a):e.call(a,t)},d.mapVisual=function(t,e,a){var i,r=n.isArray(t)?[]:n.isObject(t)?{}:(i=!0,null);return d.eachVisual(t,function(t,n){var o=e.call(a,t,n);i?r=o:r[n]=o}),r},d.retrieveVisuals=function(t){var e,a={};return t&&s(c,function(n,i){t.hasOwnProperty(i)&&(a[i]=t[i],e=!0)}),e?a:null},d.prepareVisualTypes=function(t){if(l(t)){var e=[];s(t,function(t,a){e.push(a)}),t=e}else{if(!n.isArray(t))return[];t=t.slice()}return t.sort(function(t,e){return"color"===e&&"color"!==t&&0===t.indexOf("color")?1:-1}),t},d.dependsOn=function(t,e){return"color"===e?!(!t||0!==t.indexOf(e)):t===e},d.findPieceIndex=function(t,e,a){for(var n,i=1/0,r=0,o=e.length;r<o;r++){var s=e[r].value;if(null!=s){if(s===t||"string"===typeof s&&s===t+"")return r;a&&c(s,r)}}for(r=0,o=e.length;r<o;r++){var l=e[r],u=l.interval,d=l.close;if(u){if(u[0]===-1/0){if(L(d[1],t,u[1]))return r}else if(u[1]===1/0){if(L(d[0],u[0],t))return r}else if(L(d[0],u[0],t)&&L(d[1],t,u[1]))return r;a&&c(u[0],r),a&&c(u[1],r)}}if(a)return t===1/0?e.length-1:t===-1/0?0:n;function c(e,a){var r=Math.abs(e-t);r<i&&(i=r,n=a)}};var S=d;t.exports=S},"67cc":function(t,e,a){var n=a("4e08"),i=(n.__DEV__,a("3eba")),r=a("6d8b"),o=a("2306"),s=a("e7aa"),l=s.setLabel,u=a("4319"),d=a("b5c7"),c=a("cbe5"),h=a("88b3"),p=h.throttle,g=a("b0af"),f=g.createClipPath,y=["itemStyle","barBorderWidth"],v=[0,0];function m(t,e){var a=t.getArea&&t.getArea();if("cartesian2d"===t.type){var n=t.getBaseAxis();if("category"!==n.type||!n.onBand){var i=e.getLayout("bandWidth");n.isHorizontal()?(a.x-=i,a.width+=2*i):(a.y-=i,a.height+=2*i)}}return a}r.extend(u.prototype,d);var _=i.extendChartView({type:"bar",render:function(t,e,a){this._updateDrawMode(t);var n=t.get("coordinateSystem");return"cartesian2d"!==n&&"polar"!==n||(this._isLargeDraw?this._renderLarge(t,e,a):this._renderNormal(t,e,a)),this.group},incrementalPrepareRender:function(t,e,a){this._clear(),this._updateDrawMode(t)},incrementalRender:function(t,e,a,n){this._incrementalRenderLarge(t,e)},_updateDrawMode:function(t){var e=t.pipelineContext.large;(null==this._isLargeDraw||e^this._isLargeDraw)&&(this._isLargeDraw=e,this._clear())},_renderNormal:function(t,e,a){var n,i=this.group,r=t.getData(),s=this._data,l=t.coordinateSystem,u=l.getBaseAxis();"cartesian2d"===l.type?n=u.isHorizontal():"polar"===l.type&&(n="angle"===u.dim);var d=t.isAnimationEnabled()?t:null,c=t.get("clip",!0),h=m(l,r);i.removeClipPath(),r.diff(s).add(function(e){if(r.hasValue(e)){var a=r.getItemModel(e),o=D[l.type](r,e,a);if(c){var s=w[l.type](h,o);if(s)return void i.remove(u)}var u=I[l.type](r,e,a,o,n,d);r.setItemGraphicEl(e,u),i.add(u),M(u,r,e,a,o,t,n,"polar"===l.type)}}).update(function(e,a){var u=s.getItemGraphicEl(a);if(r.hasValue(e)){var p=r.getItemModel(e),g=D[l.type](r,e,p);if(c){var f=w[l.type](h,g);if(f)return void i.remove(u)}u?o.updateProps(u,{shape:g},d,e):u=I[l.type](r,e,p,g,n,d,!0),r.setItemGraphicEl(e,u),i.add(u),M(u,r,e,p,g,t,n,"polar"===l.type)}else i.remove(u)}).remove(function(t){var e=s.getItemGraphicEl(t);"cartesian2d"===l.type?e&&L(t,d,e):e&&S(t,d,e)}).execute(),this._data=r},_renderLarge:function(t,e,a){this._clear(),V(t,this.group);var n=t.get("clip",!0)?f(t.coordinateSystem,!1,t):null;n?this.group.setClipPath(n):this.group.removeClipPath()},_incrementalRenderLarge:function(t,e){V(e,this.group,!0)},dispose:r.noop,remove:function(t){this._clear(t)},_clear:function(t){var e=this.group,a=this._data;t&&t.get("animation")&&a&&!this._isLargeDraw?a.eachItemGraphicEl(function(e){"sector"===e.type?S(e.dataIndex,t,e):L(e.dataIndex,t,e)}):e.removeAll(),this._data=null}}),x=Math.max,b=Math.min,w={cartesian2d:function(t,e){var a=e.width<0?-1:1,n=e.height<0?-1:1;a<0&&(e.x+=e.width,e.width=-e.width),n<0&&(e.y+=e.height,e.height=-e.height);var i=x(e.x,t.x),r=b(e.x+e.width,t.x+t.width),o=x(e.y,t.y),s=b(e.y+e.height,t.y+t.height);e.x=i,e.y=o,e.width=r-i,e.height=s-o;var l=e.width<0||e.height<0;return a<0&&(e.x+=e.width,e.width=-e.width),n<0&&(e.y+=e.height,e.height=-e.height),l},polar:function(t){return!1}},I={cartesian2d:function(t,e,a,n,i,s,l){var u=new o.Rect({shape:r.extend({},n)});if(s){var d=u.shape,c=i?"height":"width",h={};d[c]=0,h[c]=n[c],o[l?"updateProps":"initProps"](u,{shape:h},s,e)}return u},polar:function(t,e,a,n,i,s,l){var u=n.startAngle<n.endAngle,d=new o.Sector({shape:r.defaults({clockwise:u},n)});if(s){var c=d.shape,h=i?"r":"endAngle",p={};c[h]=i?0:n.startAngle,p[h]=n[h],o[l?"updateProps":"initProps"](d,{shape:p},s,e)}return d}};function L(t,e,a){a.style.text=null,o.updateProps(a,{shape:{width:0}},e,t,function(){a.parent&&a.parent.remove(a)})}function S(t,e,a){a.style.text=null,o.updateProps(a,{shape:{r:a.shape.r0}},e,t,function(){a.parent&&a.parent.remove(a)})}var D={cartesian2d:function(t,e,a){var n=t.getItemLayout(e),i=A(a,n),r=n.width>0?1:-1,o=n.height>0?1:-1;return{x:n.x+r*i/2,y:n.y+o*i/2,width:n.width-r*i,height:n.height-o*i}},polar:function(t,e,a){var n=t.getItemLayout(e);return{cx:n.cx,cy:n.cy,r0:n.r0,r:n.r,startAngle:n.startAngle,endAngle:n.endAngle}}};function M(t,e,a,n,i,s,u,d){var c=e.getItemVisual(a,"color"),h=e.getItemVisual(a,"opacity"),p=n.getModel("itemStyle"),g=n.getModel("emphasis.itemStyle").getBarItemStyle();d||t.setShape("r",p.get("barBorderRadius")||0),t.useStyle(r.defaults({fill:c,opacity:h},p.getBarItemStyle()));var f=n.getShallow("cursor");f&&t.attr("cursor",f);var y=u?i.height>0?"bottom":"top":i.width>0?"left":"right";d||l(t.style,g,n,c,s,a,y),o.setHoverStyle(t,g)}function A(t,e){var a=t.get(y)||0;return Math.min(a,Math.abs(e.width),Math.abs(e.height))}var E=c.extend({type:"largeBar",shape:{points:[]},buildPath:function(t,e){for(var a=e.points,n=this.__startPoint,i=this.__baseDimIdx,r=0;r<a.length;r+=2)n[i]=a[r+i],t.moveTo(n[0],n[1]),t.lineTo(a[r],a[r+1])}});function V(t,e,a){var n=t.getData(),i=[],r=n.getLayout("valueAxisHorizontal")?1:0;i[1-r]=n.getLayout("valueAxisStart");var o=new E({shape:{points:n.getLayout("largePoints")},incremental:!!a,__startPoint:i,__baseDimIdx:r,__largeDataIndices:n.getLayout("largeDataIndices"),__barWidth:n.getLayout("barWidth")});e.add(o),N(o,t,n),o.seriesIndex=t.seriesIndex,t.get("silent")||(o.on("mousedown",k),o.on("mousemove",k))}var k=p(function(t){var e=this,a=T(e,t.offsetX,t.offsetY);e.dataIndex=a>=0?a:null},30,!1);function T(t,e,a){var n=t.__baseDimIdx,i=1-n,r=t.shape.points,o=t.__largeDataIndices,s=Math.abs(t.__barWidth/2),l=t.__startPoint[i];v[0]=e,v[1]=a;for(var u=v[n],d=v[1-n],c=u-s,h=u+s,p=0,g=r.length/2;p<g;p++){var f=2*p,y=r[f+n],m=r[f+i];if(y>=c&&y<=h&&(l<=m?d>=l&&d<=m:d>=m&&d<=l))return o[p]}return-1}function N(t,e,a){var n=a.getVisual("borderColor")||a.getVisual("color"),i=e.getModel("itemStyle").getItemStyle(["color","borderColor"]);t.useStyle(i),t.style.fill=null,t.style.stroke=n,t.style.lineWidth=a.getLayout("barWidth")}t.exports=_},7368:function(t,e,a){var n=a("4e08"),i=(n.__DEV__,a("6d8b")),r=a("625e"),o=r.enableClassCheck;function s(t){return"_EC_"+t}var l=function(t){this._directed=t||!1,this.nodes=[],this.edges=[],this._nodesMap={},this._edgesMap={},this.data,this.edgeData},u=l.prototype;function d(t,e){this.id=null==t?"":t,this.inEdges=[],this.outEdges=[],this.edges=[],this.hostGraph,this.dataIndex=null==e?-1:e}function c(t,e,a){this.node1=t,this.node2=e,this.dataIndex=null==a?-1:a}u.type="graph",u.isDirected=function(){return this._directed},u.addNode=function(t,e){t=null==t?""+e:""+t;var a=this._nodesMap;if(!a[s(t)]){var n=new d(t,e);return n.hostGraph=this,this.nodes.push(n),a[s(t)]=n,n}},u.getNodeByIndex=function(t){var e=this.data.getRawIndex(t);return this.nodes[e]},u.getNodeById=function(t){return this._nodesMap[s(t)]},u.addEdge=function(t,e,a){var n=this._nodesMap,i=this._edgesMap;if("number"===typeof t&&(t=this.nodes[t]),"number"===typeof e&&(e=this.nodes[e]),d.isInstance(t)||(t=n[s(t)]),d.isInstance(e)||(e=n[s(e)]),t&&e){var r=t.id+"-"+e.id;if(!i[r]){var o=new c(t,e,a);return o.hostGraph=this,this._directed&&(t.outEdges.push(o),e.inEdges.push(o)),t.edges.push(o),t!==e&&e.edges.push(o),this.edges.push(o),i[r]=o,o}}},u.getEdgeByIndex=function(t){var e=this.edgeData.getRawIndex(t);return this.edges[e]},u.getEdge=function(t,e){d.isInstance(t)&&(t=t.id),d.isInstance(e)&&(e=e.id);var a=this._edgesMap;return this._directed?a[t+"-"+e]:a[t+"-"+e]||a[e+"-"+t]},u.eachNode=function(t,e){for(var a=this.nodes,n=a.length,i=0;i<n;i++)a[i].dataIndex>=0&&t.call(e,a[i],i)},u.eachEdge=function(t,e){for(var a=this.edges,n=a.length,i=0;i<n;i++)a[i].dataIndex>=0&&a[i].node1.dataIndex>=0&&a[i].node2.dataIndex>=0&&t.call(e,a[i],i)},u.breadthFirstTraverse=function(t,e,a,n){if(d.isInstance(e)||(e=this._nodesMap[s(e)]),e){for(var i="out"===a?"outEdges":"in"===a?"inEdges":"edges",r=0;r<this.nodes.length;r++)this.nodes[r].__visited=!1;if(!t.call(n,e,null)){var o=[e];while(o.length){var l=o.shift(),u=l[i];for(r=0;r<u.length;r++){var c=u[r],h=c.node1===l?c.node2:c.node1;if(!h.__visited){if(t.call(n,h,l))return;o.push(h),h.__visited=!0}}}}}},u.update=function(){for(var t=this.data,e=this.edgeData,a=this.nodes,n=this.edges,i=0,r=a.length;i<r;i++)a[i].dataIndex=-1;for(i=0,r=t.count();i<r;i++)a[t.getRawIndex(i)].dataIndex=i;e.filterSelf(function(t){var a=n[e.getRawIndex(t)];return a.node1.dataIndex>=0&&a.node2.dataIndex>=0});for(i=0,r=n.length;i<r;i++)n[i].dataIndex=-1;for(i=0,r=e.count();i<r;i++)n[e.getRawIndex(i)].dataIndex=i},u.clone=function(){for(var t=new l(this._directed),e=this.nodes,a=this.edges,n=0;n<e.length;n++)t.addNode(e[n].id,e[n].dataIndex);for(n=0;n<a.length;n++){var i=a[n];t.addEdge(i.node1.id,i.node2.id,i.dataIndex)}return t},d.prototype={constructor:d,degree:function(){return this.edges.length},inDegree:function(){return this.inEdges.length},outDegree:function(){return this.outEdges.length},getModel:function(t){if(!(this.dataIndex<0)){var e=this.hostGraph,a=e.data.getItemModel(this.dataIndex);return a.getModel(t)}}},c.prototype.getModel=function(t){if(!(this.dataIndex<0)){var e=this.hostGraph,a=e.edgeData.getItemModel(this.dataIndex);return a.getModel(t)}};var h=function(t,e){return{getValue:function(a){var n=this[t][e];return n.get(n.getDimension(a||"value"),this.dataIndex)},setVisual:function(a,n){this.dataIndex>=0&&this[t][e].setItemVisual(this.dataIndex,a,n)},getVisual:function(a,n){return this[t][e].getItemVisual(this.dataIndex,a,n)},setLayout:function(a,n){this.dataIndex>=0&&this[t][e].setItemLayout(this.dataIndex,a,n)},getLayout:function(){return this[t][e].getItemLayout(this.dataIndex)},getGraphicEl:function(){return this[t][e].getItemGraphicEl(this.dataIndex)},getRawIndex:function(){return this[t][e].getRawIndex(this.dataIndex)}}};i.mixin(d,h("hostGraph","data")),i.mixin(c,h("hostGraph","edgeData")),l.Node=d,l.Edge=c,o(d),o(c);var p=l;t.exports=p},"81ac":function(t,e,a){var n=a("f934"),i=a("6d8b"),r=a("e0d3"),o=r.groupData;function s(t,e,a){t.eachSeriesByType("sankey",function(t){var a=t.get("nodeWidth"),n=t.get("nodeGap"),r=l(t,e);t.layoutInfo=r;var o=r.width,s=r.height,c=t.getGraph(),h=c.nodes,p=c.edges;d(h);var g=i.filter(h,function(t){return 0===t.getLayout().value}),f=0!==g.length?0:t.get("layoutIterations"),y=t.get("orient"),v=t.get("nodeAlign");u(h,p,a,n,o,s,f,y,v)})}function l(t,e){return n.getLayoutRect(t.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()})}function u(t,e,a,n,i,r,o,s,l){c(t,e,a,i,r,s,l),y(t,e,r,i,n,o,s),M(t,s)}function d(t){i.each(t,function(t){var e=S(t.outEdges,L),a=S(t.inEdges,L),n=Math.max(e,a);t.setLayout({value:n},!0)})}function c(t,e,a,n,i,r,o){for(var s=[],l=[],u=[],d=[],c=0,h=0,g=0;g<e.length;g++)s[g]=1;for(g=0;g<t.length;g++)l[g]=t[g].inEdges.length,0===l[g]&&u.push(t[g]);var y=-1;while(u.length){for(var v=0;v<u.length;v++){var m=u[v],_=m.hostGraph.data.getRawDataItem(m.dataIndex),x=null!=_.depth&&_.depth>=0;x&&_.depth>y&&(y=_.depth),m.setLayout({depth:x?_.depth:c},!0),"vertical"===r?m.setLayout({dy:a},!0):m.setLayout({dx:a},!0);for(var b=0;b<m.outEdges.length;b++){var w=m.outEdges[b],I=e.indexOf(w);s[I]=0;var L=w.node2,S=t.indexOf(L);0===--l[S]&&d.indexOf(L)<0&&d.push(L)}}++c,u=d,d=[]}for(g=0;g<s.length;g++)if(1===s[g])throw new Error("Sankey is a DAG, the original data has cycle!");var D=y>c-1?y:c-1;o&&"left"!==o&&p(t,o,r,D);h="vertical"===r?(i-a)/D:(n-a)/D;f(t,h,r)}function h(t){var e=t.hostGraph.data.getRawDataItem(t.dataIndex);return null!=e.depth&&e.depth>=0}function p(t,e,a,n){if("right"===e){var r=[],o=t,s=0;while(o.length){for(var l=0;l<o.length;l++){var u=o[l];u.setLayout({skNodeHeight:s},!0);for(var d=0;d<u.inEdges.length;d++){var c=u.inEdges[d];r.indexOf(c.node1)<0&&r.push(c.node1)}}o=r,r=[],++s}i.each(t,function(t){h(t)||t.setLayout({depth:Math.max(0,n-t.getLayout().skNodeHeight)},!0)})}else"justify"===e&&g(t,n)}function g(t,e){i.each(t,function(t){h(t)||t.outEdges.length||t.setLayout({depth:e},!0)})}function f(t,e,a){i.each(t,function(t){var n=t.getLayout().depth*e;"vertical"===a?t.setLayout({y:n},!0):t.setLayout({x:n},!0)})}function y(t,e,a,n,i,r,o){var s=v(t,o);m(s,e,a,n,i,o),_(s,i,a,n,o);for(var l=1;r>0;r--)l*=.99,x(s,l,o),_(s,i,a,n,o),D(s,l,o),_(s,i,a,n,o)}function v(t,e){var a=[],n="vertical"===e?"y":"x",r=o(t,function(t){return t.getLayout()[n]});return r.keys.sort(function(t,e){return t-e}),i.each(r.keys,function(t){a.push(r.buckets.get(t))}),a}function m(t,e,a,n,r,o){var s=1/0;i.each(t,function(t){var e=t.length,l=0;i.each(t,function(t){l+=t.getLayout().value});var u="vertical"===o?(n-(e-1)*r)/l:(a-(e-1)*r)/l;u<s&&(s=u)}),i.each(t,function(t){i.each(t,function(t,e){var a=t.getLayout().value*s;"vertical"===o?(t.setLayout({x:e},!0),t.setLayout({dx:a},!0)):(t.setLayout({y:e},!0),t.setLayout({dy:a},!0))})}),i.each(e,function(t){var e=+t.getValue()*s;t.setLayout({dy:e},!0)})}function _(t,e,a,n,r){var o="vertical"===r?"x":"y";i.each(t,function(t){var i,s,l;t.sort(function(t,e){return t.getLayout()[o]-e.getLayout()[o]});for(var u=0,d=t.length,c="vertical"===r?"dx":"dy",h=0;h<d;h++)s=t[h],l=u-s.getLayout()[o],l>0&&(i=s.getLayout()[o]+l,"vertical"===r?s.setLayout({x:i},!0):s.setLayout({y:i},!0)),u=s.getLayout()[o]+s.getLayout()[c]+e;var p="vertical"===r?n:a;if(l=u-e-p,l>0)for(i=s.getLayout()[o]-l,"vertical"===r?s.setLayout({x:i},!0):s.setLayout({y:i},!0),u=i,h=d-2;h>=0;--h)s=t[h],l=s.getLayout()[o]+s.getLayout()[c]+e-u,l>0&&(i=s.getLayout()[o]-l,"vertical"===r?s.setLayout({x:i},!0):s.setLayout({y:i},!0)),u=s.getLayout()[o]})}function x(t,e,a){i.each(t.slice().reverse(),function(t){i.each(t,function(t){if(t.outEdges.length){var n=S(t.outEdges,b,a)/S(t.outEdges,L,a);if("vertical"===a){var i=t.getLayout().x+(n-I(t,a))*e;t.setLayout({x:i},!0)}else{var r=t.getLayout().y+(n-I(t,a))*e;t.setLayout({y:r},!0)}}})})}function b(t,e){return I(t.node2,e)*t.getValue()}function w(t,e){return I(t.node1,e)*t.getValue()}function I(t,e){return"vertical"===e?t.getLayout().x+t.getLayout().dx/2:t.getLayout().y+t.getLayout().dy/2}function L(t){return t.getValue()}function S(t,e,a){var n=0,i=t.length,r=-1;while(++r<i){var o=+e.call(t,t[r],a);isNaN(o)||(n+=o)}return n}function D(t,e,a){i.each(t,function(t){i.each(t,function(t){if(t.inEdges.length){var n=S(t.inEdges,w,a)/S(t.inEdges,L,a);if("vertical"===a){var i=t.getLayout().x+(n-I(t,a))*e;t.setLayout({x:i},!0)}else{var r=t.getLayout().y+(n-I(t,a))*e;t.setLayout({y:r},!0)}}})})}function M(t,e){var a="vertical"===e?"x":"y";i.each(t,function(t){t.outEdges.sort(function(t,e){return t.node2.getLayout()[a]-e.node2.getLayout()[a]}),t.inEdges.sort(function(t,e){return t.node1.getLayout()[a]-e.node1.getLayout()[a]})}),i.each(t,function(t){var e=0,a=0;i.each(t.outEdges,function(t){t.setLayout({sy:e},!0),e+=t.getLayout().dy}),i.each(t.inEdges,function(t){t.setLayout({ty:a},!0),a+=t.getLayout().dy})})}t.exports=s},"94b1":function(t,e,a){var n=a("3eba"),i=a("6d8b"),r=a("9d57"),o=r.layout,s=r.largeLayout;a("5aa9"),a("17b8"),a("67cc"),a("01ed"),n.registerLayout(n.PRIORITY.VISUAL.LAYOUT,i.curry(o,"bar")),n.registerLayout(n.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,s),n.registerVisual({seriesType:"bar",reset:function(t){t.getData().setVisual("legendSymbol","roundRect")}})},b5c7:function(t,e,a){var n=a("282b"),i=n([["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["stroke","barBorderColor"],["lineWidth","barBorderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]),r={getBarItemStyle:function(t){var e=i(this,t);if(this.getBorderLineDash){var a=this.getBorderLineDash();a&&(e.lineDash=a)}return e}};t.exports=r},bdc0:function(t,e,a){var n=a("3eba");a("d2a5"),n.registerAction({type:"dragNode",event:"dragnode",update:"update"},function(t,e){e.eachComponent({mainType:"series",subType:"sankey",query:t},function(e){e.setNodePosition(t.dataIndex,[t.localX,t.localY])})})},c59e:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("shop-header"),a("div",{staticClass:"headBlock"},[a("a-row",{attrs:{gutter:24}},[a("a-col",{style:{marginBottom:"24px"},attrs:{sm:24,md:12,xl:6}},[a("chart-card",{attrs:{loading:!1,title:"总订单数",total:t.total_sale}},[a("a-tooltip",{attrs:{slot:"action",title:"该店铺的总订单数"},slot:"action"},[a("a-icon",{attrs:{type:"info-circle-o"}})],1)],1)],1),a("a-col",{style:{marginBottom:"24px"},attrs:{sm:24,md:12,xl:6}},[a("chart-card",{attrs:{loading:!1,title:"总浏览次数",total:t.total_user_num}},[a("a-tooltip",{attrs:{slot:"action",title:"该店铺的总浏览次数"},slot:"action"},[a("a-icon",{attrs:{type:"info-circle-o"}})],1)],1)],1),a("a-col",{style:{marginBottom:"24px"},attrs:{sm:24,md:12,xl:6}},[a("chart-card",{attrs:{loading:!1,title:"总浏览用户数",total:t.total_user_count}},[a("a-tooltip",{attrs:{slot:"action",title:"该店铺的商品主页和商品详情页浏览用户数"},slot:"action"},[a("a-icon",{attrs:{type:"info-circle-o"}})],1)],1)],1),a("a-col",{style:{marginBottom:"24px"},attrs:{sm:24,md:12,xl:6}},[a("chart-card",{attrs:{loading:!1,title:"平均浏览时长",total:t.avg_visit_time}},[a("a-tooltip",{attrs:{slot:"action",title:"该店铺的总浏览时长/总浏览人数"},slot:"action"},[a("a-icon",{attrs:{type:"info-circle-o"}})],1)],1)],1)],1)],1),a("div",{staticStyle:{"margin-bottom":"24px"}},[a("a-row",{attrs:{gutter:24}},[a("a-col",{style:{marginBottom:"24px"},attrs:{sm:24,md:12,xl:18}},[a("a-card",{attrs:{loading:!1,bordered:!1,"body-style":{padding:"0"}}},[a("div",{staticClass:"salesCard"},[a("a-tabs",{attrs:{"default-active-key":"1",size:"large","tab-bar-style":{marginBottom:"24px",paddingLeft:"16px"}}},[a("div",{staticClass:"extra-wrapper",attrs:{slot:"tabBarExtraContent"},slot:"tabBarExtraContent"},[a("div",{staticClass:"extra-item"},[a("div",[a("a-range-picker",{on:{change:t.changeByRange}})],1)]),a("div",{staticClass:"extra-item"},[a("a",{on:{click:function(e){return t.change_type(t.week)}}},[t._v("本周")]),a("a",{on:{click:function(e){return t.change_type(t.month)}}},[t._v("本月")]),a("a",{on:{click:function(e){return t.change_type(t.year)}}},[t._v("本年")])])]),a("a-tab-pane",{key:"1",attrs:{loading:"false",tab:"浏览用户数"}},[a("div",{staticStyle:{width:"80%"}},[a("ve-line",{attrs:{data:t.user_count_line}})],1)]),a("a-tab-pane",{key:"2",attrs:{tab:"浏览次数"}},[a("div",{staticStyle:{width:"80%"}},[a("ve-line",{attrs:{data:t.page_view_line}})],1)])],1)],1)])],1),a("a-col",{style:{marginBottom:"24px"},attrs:{sm:24,md:12,xl:6}},[a("a-card",[a("a-tabs",{attrs:{"default-active-key":"1",size:"small"}},[a("a-tab-pane",{key:"1",attrs:{tab:"访问模块",loading:"false"}},[a("rank-list",{attrs:{title:"TOP10访问模块",list:t.blockRankList}})],1),a("a-tab-pane",{key:"2",attrs:{tab:"访问用户"}},[a("rank-list",{attrs:{title:"TOP10访问用户",list:t.userRankList}})],1)],1)],1)],1)],1)],1),a("div",{staticStyle:{"margin-bottom":"24px"}},[a("a-card",{attrs:{title:"访问占比"}},[a("a-row",{attrs:{gutter:24}},[a("a-col",{style:{marginBottom:"24px"},attrs:{sm:24,md:12,xl:6}},[a("ve-ring",{attrs:{data:t.phoneData}})],1),a("a-col",{style:{marginBottom:"24px"},attrs:{sm:24,md:12,xl:6}},[a("ve-ring",{attrs:{data:t.visitTimeData}})],1),a("a-col",{style:{marginBottom:"24px"},attrs:{sm:24,md:12,xl:6}},[a("ve-ring",{attrs:{data:t.registerData,settings:t.registerSetting}})],1),a("a-col",{style:{marginBottom:"24px"},attrs:{sm:24,md:12,xl:6}},[a("ve-ring",{attrs:{data:t.timeSpentData}})],1)],1)],1)],1),a("div",{staticStyle:{"margin-bottom":"24px"}},[a("a-row",{attrs:{gutter:24}},[a("a-col",{style:{marginBottom:"24px"},attrs:{sm:24,md:12,xl:12}},[a("a-card",{attrs:{title:"新老用户占比"}},[a("ve-ring",{attrs:{data:t.userData}})],1)],1),a("a-col",{style:{marginBottom:"24px"},attrs:{sm:24,md:12,xl:12}},[a("a-card",{attrs:{title:"访问模块占比"}},[a("div",{staticStyle:{width:"80%",margin:"0 auto"}},[a("ve-histogram",{attrs:{data:t.histogramData}})],1)])],1)],1)],1)],1)},i=[],r=(a("ac6a"),a("456d"),a("55dd"),a("2af9")),o=a("f4c0"),s=a("1bdf"),l=a.n(s),u=a("c3da"),d=a.n(u),c=a("d768"),h=a.n(c),p=a("2cd2"),g=a.n(p),f=a("d4f3"),y=[{title:"排名",dataIndex:"rank"},{title:"来源渠道",dataIndex:"source"},{title:"用户数",dataIndex:"userNumber"},{title:"周涨幅",dataIndex:"weeklyGains"}],v={name:"WapFlow",components:{ChartCard:r["d"],shopHeader:o["a"],VeSankey:l.a,RankList:r["n"],VeLine:d.a,VeHistogram:h.a,VeRing:g.a},data:function(){return{data:[],loading:!1,columns:y,userRankList:[],total_user_num:0,total_avg_visit_time:0,total_sale:0,total_user_count:0,day_user_num:0,day_avg_visit_time:0,avg_visit_time:0,day_sale:0,day_user_count:0,blockRankList:[],timeSpentData:{},visitTimeData:{},registerData:{},registerSetting:{limitShowNum:4},phoneData:{},userData:{},histogramData:{},user_count_line:{},page_view_line:{},week:"week",month:"month",year:"year",num:0,queryParam:{},table_duration_type:"month",space:""}},methods:{query:function(){var t=this;Object(f["n"])(this.queryParam).then(function(e){t.total_user_num=e.data.total_user_num,t.avg_visit_time=e.data.avg_visit_time,t.total_avg_visit_time=e.data.total_avg_visit_time,t.total_sale=e.data.total_sale,t.total_user_count=e.data.total_user_count,t.day_user_num=e.data.day_user_num,t.day_avg_visit_time=e.data.day_avg_visit_time,t.day_sale=e.data.day_sale,t.day_user_count=e.data.day_user_count}),Object(f["p"])(this.queryParam).then(function(e){var a=e.data.store_user_duration_top10,n=e.data.store_user_block_top10,i=e.data.user_device_maps,r=e.data.user_level_maps,o=e.data.user_sorce_maps,s=e.data.user_time_interval_maps,l=e.data.duration_count_maps;t.user_device_maps_methods(i),t.user_level_maps_methods(r),t.user_sorce_maps_methods(o),t.user_time_interval_maps_methods(s),t.duration_count_maps_methods(l),t.store_user_block_top10_methods(n),t.store_user_duration_top10_methods(a),t.store_user_block_chart(n)});var e={hbh_store_id:this.num,table_duration_type:this.table_duration_type};Object(f["o"])(e).then(function(e){var a=e.data.table;t.line_methods(a)})},user_device_maps_methods:function(t){var e,a={columns:["手机机型","用户数量"],rows:[]};for(e in t)a.rows.push({"手机机型":e,"用户数量":t[e]});this.phoneData=a},user_level_maps_methods:function(t){var e,a={columns:["用户类型","用户数量"],rows:[]};for(e in t)a.rows.push({"用户类型":e,"用户数量":t[e]});this.userData=a},user_sorce_maps_methods:function(t){var e,a={columns:["注册来源","用户数量"],rows:[]};for(e in t)a.rows.push({"注册来源":e,"用户数量":t[e]});this.registerData=a},user_time_interval_maps_methods:function(t){var e,a={columns:["访问时间段","用户数量"],rows:[]};for(e in t)a.rows.push({"访问时间段":e,"用户数量":t[e]});this.visitTimeData=a},duration_count_maps_methods:function(t){var e,a={columns:["访问时长","用户数量"],rows:[]};for(e in t)a.rows.push({"访问时长":e,"用户数量":t[e]});this.timeSpentData=a},store_user_duration_top10_methods:function(t){for(var e,a=[],n={},i=Object.keys(t).sort(function(e,a){return t[a]-t[e]}),r=0;r<i.length;r++)n[i[r]]=t[i[r]];for(e in n)a.push({name:e,total:t[e]});this.userRankList=a},store_user_block_top10_methods:function(t){for(var e,a=[],n={},i=Object.keys(t).sort(function(e,a){return t[a]-t[e]}),r=0;r<i.length;r++)n[i[r]]=t[i[r]];for(e in n)a.push({name:e,total:t[e]});this.blockRankList=a},store_user_block_chart:function(t){var e,a={columns:["分类","访问用户"],rows:[]};for(e in t)a.rows.push({"分类":e,"访问用户":t[e]});this.histogramData=a},line_methods:function(t){var e,a={columns:["时间","浏览用户数"],rows:[]},n={columns:["时间","浏览次数"],rows:[]};for(e in t)a.rows.push({"时间":t[e]["created_date"],"浏览用户数":t[e]["total_user_count"]}),n.rows.push({"时间":t[e]["created_date"],"浏览次数":t[e]["page_view_num"]});this.user_count_line=a,this.page_view_line=n},change_type:function(t){var e=this,a={hbh_store_id:this.num,table_duration_type:t};Object(f["o"])(a).then(function(t){var a=t.data.table;e.line_methods(a)})},changeByRange:function(t,e){var a=this,n={hbh_store_id:this.num,start_date:e[0],over_date:e[1]};""!==e[0]&&Object(f["o"])(n).then(function(t){var e=t.data.table;a.line_methods(e)})}},created:function(){this.num=this.$route.params.hbh_store_id,this.queryParam={hbh_store_id:this.num},this.query()}},m=v,_=(a("d61f"),a("2877")),x=Object(_["a"])(m,n,i,!1,null,"7f82b97a",null);e["default"]=x.exports},d01c:function(t,e,a){var n=a("4f85"),i=a("237f"),r=a("eda2"),o=r.encodeHTML,s=a("4319"),l=a("4e08"),u=(l.__DEV__,n.extend({type:"series.sankey",layoutInfo:null,levelModels:null,getInitialData:function(t,e){for(var a=t.edges||t.links,n=t.data||t.nodes,r=t.levels,o=this.levelModels={},l=0;l<r.length;l++)null!=r[l].depth&&r[l].depth>=0&&(o[r[l].depth]=new s(r[l],this,e));if(n&&a){var u=i(n,a,this,!0,d);return u.data}function d(t,e){t.wrapMethod("getItemModel",function(t,e){return t.customizeGetParent(function(t){var a=this.parentModel,n=a.getData().getItemLayout(e).depth,i=a.levelModels[n];return i||this.parentModel}),t}),e.wrapMethod("getItemModel",function(t,e){return t.customizeGetParent(function(t){var a=this.parentModel,n=a.getGraph().getEdgeByIndex(e),i=n.node1.getLayout().depth,r=a.levelModels[i];return r||this.parentModel}),t})}},setNodePosition:function(t,e){var a=this.option.data[t];a.localX=e[0],a.localY=e[1]},getGraph:function(){return this.getData().graph},getEdgeData:function(){return this.getGraph().edgeData},formatTooltip:function(t,e,a){if("edge"===a){var n=this.getDataParams(t,a),i=n.data,r=i.source+" -- "+i.target;return n.value&&(r+=" : "+n.value),o(r)}if("node"===a){var s=this.getGraph().getNodeByIndex(t),l=s.getLayout().value,d=this.getDataParams(t,a).data.name;if(l)r=d+" : "+l;return o(r)}return u.superCall(this,"formatTooltip",t,e)},optionUpdated:function(){var t=this.option;!0===t.focusNodeAdjacency&&(t.focusNodeAdjacency="allEdges")},defaultOption:{zlevel:0,z:2,coordinateSystem:"view",layout:null,left:"5%",top:"5%",right:"20%",bottom:"5%",orient:"horizontal",nodeWidth:20,nodeGap:8,draggable:!0,focusNodeAdjacency:!1,layoutIterations:32,label:{show:!0,position:"right",color:"#000",fontSize:12},levels:[],nodeAlign:"justify",itemStyle:{borderWidth:1,borderColor:"#333"},lineStyle:{color:"#314656",opacity:.2,curveness:.5},emphasis:{label:{show:!0},lineStyle:{opacity:.6}},animationEasing:"linear",animationDuration:1e3}})),d=u;t.exports=d},d2a5:function(t,e,a){var n=a("3eba");n.registerAction({type:"focusNodeAdjacency",event:"focusNodeAdjacency",update:"series:focusNodeAdjacency"},function(){}),n.registerAction({type:"unfocusNodeAdjacency",event:"unfocusNodeAdjacency",update:"series:unfocusNodeAdjacency"},function(){})},d61f:function(t,e,a){"use strict";var n=a("2502"),i=a.n(n);i.a},d768:function(t,e,a){"use strict";function n(t){return t&&"object"===typeof t&&"default"in t?t["default"]:t}var i=a("89d6"),r=a("6f0c"),o=a("4cbb");a("94b1");var s=n(a("6521")),l=function(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t},u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t},d=.5;function c(t){var e=t.innerRows,a=t.dimAxisName,n=t.dimension,i=t.axisVisible,r=t.dimAxisType,o=t.dims;return n.map(function(t){return{type:"category",name:a,nameLocation:"middle",nameGap:22,data:"value"===r?h(o):e.map(function(e){return e[t]}),axisLabel:{formatter:function(t){return String(t)}},show:i}})}function h(t){for(var e=Math.max.apply(null,t),a=Math.min.apply(null,t),n=[],i=a;i<=e;i++)n.push(i);return n}function p(t){for(var e=t.meaAxisName,a=t.meaAxisType,n=t.axisVisible,i=t.digit,o=t.scale,s=t.min,l=t.max,d={type:"value",axisTick:{show:!1},show:n},c=[],h=function(t){a[t]?c[t]=u({},d,{axisLabel:{formatter:function(e){return r.getFormated(e,a[t],i)}}}):c[t]=u({},d),c[t].name=e[t]||"",c[t].scale=o[t]||!1,c[t].min=s[t]||null,c[t].max=l[t]||null},p=0;p<2;p++)h(p);return c}function g(t){var e=t.axisSite,a=t.isHistogram,n=t.meaAxisType,o=t.digit,s=t.labelMap,l=a?e.right||[]:e.top||[];return s&&(l=l.map(function(t){return void 0===s[t]?t:s[t]})),{trigger:"axis",formatter:function(t){var e=[];return e.push(t[0].name+"<br>"),t.forEach(function(t){var a=t.seriesName,s=~l.indexOf(a)?n[1]:n[0];e.push(i.itemPoint(t.color)),e.push(a+": "),e.push(r.getFormated(t.value,s,o)),e.push("<br>")}),e.join("")}}}function f(t,e){for(var a=Math.max.apply(null,e),n=Math.min.apply(null,e),i=[],r=n;r<=a;r++){var o=e.indexOf(r);~o?i.push(t[o]):i.push(null)}return i}function y(t){var e=t.innerRows,a=t.metrics,n=t.stack,i=t.axisSite,s=t.isHistogram,u=t.labelMap,c=t.itemStyle,h=t.label,p=t.showLine,g=void 0===p?[]:p,y=t.dimAxisType,v=t.barGap,m=t.opacity,_=t.dims,x=[],b={},w=s?i.right||[]:i.top||[],I=s?"yAxisIndex":"xAxisIndex",L=n&&r.getStackMap(n);return a.forEach(function(t){b[t]=[]}),e.forEach(function(t){a.forEach(function(e){b[e].push(t[e])})}),x=Object.keys(b).map(function(t,e){var a="value"===y?f(b[t],_):b[t],i=l({name:null!=u[t]?u[t]:t,type:~g.indexOf(t)?"line":"bar",data:a},I,~w.indexOf(t)?"1":"0");n&&L[t]&&(i.stack=L[t]),h&&(i.label=h),c&&(i.itemStyle=c);var r=m||o.get(i,"itemStyle.normal.opacity");return"value"===y&&(i.barGap=v,i.barCategoryGap="1%",null==r&&(r=d)),null!=r&&o.set(i,"itemStyle.normal.opacity",r),i}),!!x.length&&x}function v(t){var e=t.metrics,a=t.labelMap,n=t.legendName;if(!n&&!a)return{data:e};var i=a?e.map(function(t){return null==a[t]?t:a[t]}):e;return{data:i,formatter:function(t){return null!=n[t]?n[t]:t}}}function m(t,e){return t.map(function(t){return t[e[0]]})}var _=function(t,e,a,n){var i=o.cloneDeep(e),r=a.axisSite,s=void 0===r?{}:r,l=a.dimension,u=void 0===l?[t[0]]:l,d=a.stack,h=void 0===d?{}:d,f=a.axisVisible,_=void 0===f||f,x=a.digit,b=void 0===x?2:x,w=a.dataOrder,I=void 0!==w&&w,L=a.scale,S=void 0===L?[!1,!1]:L,D=a.min,M=void 0===D?[null,null]:D,A=a.max,E=void 0===A?[null,null]:A,V=a.labelMap,k=void 0===V?{}:V,T=a.legendName,N=void 0===T?{}:T,P=a.label,O=a.itemStyle,j=a.showLine,B=a.barGap,R=void 0===B?"-100%":B,G=a.opacity;if(I){var C=I.label,H=I.order;C&&H?i.sort(function(t,e){return"desc"===H?t[C]-e[C]:e[C]-t[C]}):console.warn("Need to provide name and order parameters")}var z=n.tooltipVisible,W=n.legendVisible,F=t.slice();s.left&&s.right?F=s.left.concat(s.right):s.left&&!s.right?F=s.left:a.metrics?F=a.metrics:F.splice(t.indexOf(u[0]),1);var Y=a.yAxisType||["normal","normal"],X=a.xAxisType||"category",q=a.yAxisName||[],U=a.xAxisName||"",J=!0,Z=m(i,u),$=W&&v({metrics:F,labelMap:k,legendName:N}),K=c({innerRows:i,dimAxisName:U,dimension:u,axisVisible:_,dimAxisType:X,dims:Z}),Q=p({meaAxisName:q,meaAxisType:Y,axisVisible:_,digit:b,scale:S,min:M,max:E}),tt=y({innerRows:i,metrics:F,stack:h,axisSite:s,isHistogram:J,labelMap:k,itemStyle:O,label:P,showLine:j,dimAxisType:X,dimension:u,barGap:R,opacity:G,dims:Z}),et={axisSite:s,isHistogram:J,meaAxisType:Y,digit:b,labelMap:k},at=z&&g(et),nt={legend:$,yAxis:Q,series:tt,xAxis:K,tooltip:at};return nt},x=u({},s,{name:"VeHistogram",data:function(){return this.chartHandler=_,{}}});t.exports=x},e7aa:function(t,e,a){var n=a("2306"),i=a("c775"),r=i.getDefaultLabel;function o(t,e,a,i,o,l,u){var d=a.getModel("label"),c=a.getModel("emphasis.label");n.setLabelStyle(t,e,d,c,{labelFetcher:o,labelDataIndex:l,defaultText:r(o.getData(),l),isRectText:!0,autoColor:i}),s(t),s(e)}function s(t,e){"outside"===t.textPosition&&(t.textPosition=e)}e.setLabel=o}}]);